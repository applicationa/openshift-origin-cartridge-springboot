#!/bin/bash -eu

source $OPENSHIFT_CARTRIDGE_SDK_BASH

function update-configuration() {
  if marker_present java7 || [ ${1:-undefined} == java7 ]
  then
    export JAVA_HOME=$OPENSHIFT_SPRINGBOOT_JDK7
  elif marker_present java8 || [ ${1:-undefined} == java8 ]
  then
    export JAVA_HOME=$OPENSHIFT_SPRINGBOOT_JDK8
  else
    export JAVA_HOME=$OPENSHIFT_SPRINGBOOT_JDK6
  fi

 }
 
 function export_java_home() { #JAVA_HOME=$OPENSHIFT_WILDFLY_JDK8
  if marker_present "java7"; then
    export JAVA_HOME=$OPENSHIFT_JBOSSEWS_JDK7
  elif marker_present java8
  then
    export JAVA_HOME=$OPENSHIFT_WILDFLY_JDK8
  else
    export JAVA_HOME=$OPENSHIFT_JBOSSEWS_JDK6
  fi
}


function reinstall_path {
 echo $JAVA_HOME > $OPENSHIFT_SPRINGBOOT_DIR/env/JAVA_HOME
  echo "$JAVA_HOME/bin:$M2_HOME/bin:$SPRING_HOME/bin:$SPRING_HOME/shell_completion/bash" > $OPENSHIFT_SPRINGBOOT_DIR/env/OPENSHIFT_SPRINGBOOT_PATH_ELEMENT
}